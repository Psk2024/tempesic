<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Employee Database (Online - Firestore)</title>

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <h1>Employee Database (Online - Firestore)</h1>

    <div class="top-bar">
      <div class="top-bar-left">
        <div>
          <strong>Total Employees:</strong> <span id="empCount">0</span>
          <span class="status" id="statusText"></span>
        </div>

        <button class="btn-primary btn-small" id="addEmpBtn">+ Add Employee</button>

        <!-- Only Download button now -->
        <button class="btn-secondary btn-small" id="downloadBtn" type="button">
          Download Excel
        </button>
      </div>

      <div class="search-box">
        <input
          type="text"
          id="searchInput"
          placeholder="Search by ID / Name / Group / Branch / Status..."
        />
      </div>
    </div>

    <!-- Group-wise Dashboard (cards) -->
    <div class="dash-card">
      <h3>Group-wise Summary (unique Emp IDs)</h3>
      <div class="dash-card-row" id="dashCardRow"></div>

      <!-- Status-wise Pending Summary cards -->
      <div style="margin-top:8px;font-size:12px;font-weight:600;color:#1d4ed8;">
        Status-wise Pending Summary
      </div>
      <div class="dash-card-row" id="statusCardRow"></div>
    </div>

    <!-- MAIN TABLE: only basic columns -->
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th style="width:40px;">#</th>
            <th>Emp ID</th>
            <th>Name</th>
            <th>Designation</th>
            <th>Branch</th>
          </tr>
        </thead>
        <tbody id="empTableBody"></tbody>
      </table>
    </div>

    <div class="footer-note">
      Data is stored online in Google Firebase Firestore (Project: empdb-2c5bb).
    </div>
  </div>

  <!-- POPUP / MODAL FOR VIEW / EDIT EMPLOYEE -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title" id="modalTitle">Add Employee</span>
        <button class="modal-close" id="modalCloseBtn" title="Close">&times;</button>
      </div>
      <div class="form-card">
        <div
          style="display:flex;align-items:center;justify-content:space-between;margin-bottom:6px;"
        >
          <strong style="font-size:13px;">Employee Details</strong>
          <span id="editBadge" class="badge-edit" style="display:none;">
            Viewing existing record
          </span>
        </div>

        <div class="form-grid">
          <!-- Basic details -->
          <div class="field">
            <label for="empId">Emp ID *</label>
            <input type="text" id="empId" />
          </div>
          <div class="field">
            <label for="empName">Officer / Official Name *</label>
            <input type="text" id="empName" />
          </div>
          <div class="field">
            <label for="empDesignation">Designation</label>
            <input type="text" id="empDesignation" />
          </div>
          <div class="field">
            <label for="empGroup">Group</label>
            <input type="text" id="empGroup" />
          </div>
          <div class="field">
            <label for="empBranch">Branch</label>
            <input type="text" id="empBranch" />
          </div>
          <div class="field">
            <label for="empGender">Gender</label>
            <input type="text" id="empGender" />
          </div>
          <div class="field">
            <label for="empDob">DoB</label>
            <input type="text" id="empDob" placeholder="dd-mm-yyyy" />
          </div>
          <div class="field">
            <label for="empRetirement">Retirement</label>
            <input type="text" id="empRetirement" placeholder="dd-mm-yyyy" />
          </div>
          <div class="field">
            <label for="empDojBranch">Date of Reporting</label>
            <input type="text" id="empDojBranch" placeholder="dd-mm-yyyy" />
          </div>
          <div class="field">
            <label for="empDojAU">Tentative Probation Completion</label>
            <input type="text" id="empDojAU" placeholder="dd-mm-yyyy" />
          </div>
          <div class="field">
            <label for="empContact">Contact Details</label>
            <input type="text" id="empContact" />
          </div>

          <!-- Status (no dates now) -->
          <div class="field">
            <label for="empProbationStatus">Probation Status</label>
            <select id="empProbationStatus">
              <option value="">-- Select --</option>
              <option value="Pending">Pending</option>
              <option value="Completed">Completed</option>
              <option value="Not Applicable">Not Applicable</option>
            </select>
          </div>

          <div class="field">
            <label for="empCharacterStatus">Police Verification Status</label>
            <select id="empCharacterStatus">
              <option value="">-- Select --</option>
              <option value="Pending">Pending</option>
              <option value="Completed">Completed</option>
              <option value="Not Applicable">Not Applicable</option>
            </select>
          </div>

          <div class="field">
            <label for="empCasteStatus">Caste Verification Status</label>
            <select id="empCasteStatus">
              <option value="">-- Select --</option>
              <option value="Pending">Pending</option>
              <option value="Completed">Completed</option>
              <option value="Not Applicable">Not Applicable</option>
            </select>
          </div>

          <div class="field">
            <label for="empConfirmationStatus">Confirmation Status</label>
            <select id="empConfirmationStatus">
              <option value="">-- Select --</option>
              <option value="Pending">Pending</option>
              <option value="Completed">Completed</option>
              <option value="Not Applicable">Not Applicable</option>
            </select>
          </div>
        </div>

        <div class="buttons">
          <button class="btn-primary" id="saveBtn">Save</button>
          <button class="btn-secondary" id="editBtn" type="button">Edit</button>
          <button class="btn-secondary" id="clearBtn" type="button">Clear</button>
          <button class="btn-danger" id="deleteBtn" disabled>Delete</button>

          <!-- CSV Import -->
          <button class="btn-secondary" id="importBtn" type="button">Import CSV</button>
          <input type="file" id="csvFileInput" accept=".csv" style="display:none;" />
        </div>

        <div id="modalStatus" class="status"></div>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <!-- Main logic -->
  <script src="app.js"></script>
</body>
</html>
